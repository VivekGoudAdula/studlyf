<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{name}} | Portfolio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;500;700;800&display=swap');

        :root {
            --primary: #2563eb;
            --dark: #0f172a;
            --light: #f8fafc;
            --glass: rgba(255, 255, 255, 0.7);
            --border: rgba(255, 255, 255, 0.5);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
        }

        body {
            margin: 0;
            background: #f1f5f9;
            font-family: 'Plus Jakarta Sans', sans-serif;
            color: var(--dark);
            overflow-x: hidden;
        }

        .background-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at 10% 20%, rgba(37, 99, 235, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 40%);
            z-index: -1;
        }

        nav {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            padding: 1rem 2rem;
            border-radius: 100px;
            display: flex;
            gap: 2rem;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid white;
        }

        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            font-size: 0.9rem;
            opacity: 0.6;
            transition: 0.3s;
        }

        nav a:hover {
            opacity: 1;
            color: var(--primary);
        }

        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            position: relative;
        }

        .hero h1 {
            font-size: 6vw;
            line-height: 1.1;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            /* JS Fade In */
            transform: translateY(30px);
        }

        .hero p {
            font-size: 1.5rem;
            color: #64748b;
            max-width: 600px;
            opacity: 0;
            transform: translateY(30px);
        }

        .badge-role {
            background: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 2px;
            color: var(--primary);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(-20px);
        }

        .section {
            max-width: 1000px;
            margin: 0 auto;
            padding: 8rem 2rem;
        }

        .section-title {
            font-size: 3rem;
            margin-bottom: 4rem;
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 10px;
            right: -20px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            z-index: -1;
            opacity: 0.2;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .glass-card {
            background: white;
            border-radius: 24px;
            padding: 2.5rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.8);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
        }

        .glass-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(37, 99, 235, 0.1);
            border-color: var(--primary);
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), #ec4899);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s;
        }

        .glass-card:hover::before {
            transform: scaleX(1);
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 1.5rem;
        }

        .pill {
            background: #f1f5f9;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            color: #475569;
        }

        .exp-item {
            display: grid;
            grid-template-columns: 100px 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
            opacity: 0;
            transform: translateX(-30px);
        }

        @media(max-width: 768px) {
            .exp-item {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
        }

        .exp-year {
            font-weight: 800;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .exp-content h3 {
            margin: 0;
            font-size: 1.5rem;
        }

        .exp-content h4 {
            margin: 0.5rem 0 1rem;
            color: #64748b;
            font-weight: 500;
        }

        .contact-footer {
            background: var(--dark);
            color: white;
            padding: 6rem 2rem;
            text-align: center;
            border-radius: 40px 40px 0 0;
            margin-top: 4rem;
        }

        .cta-btn {
            display: inline-block;
            background: white;
            color: var(--dark);
            padding: 1.2rem 3rem;
            border-radius: 100px;
            font-weight: 800;
            text-decoration: none;
            margin-top: 2rem;
            font-size: 1.2rem;
            transition: 0.3s;
        }

        .cta-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
        }
    </style>
</head>

<body>
    <div class="background-gradient"></div>

    <nav>
        <a href="#hero">Home</a>
        <a href="#skills">Skills</a>
        <a href="#projects">Work</a>
        <a href="#experience">History</a>
    </nav>

    <header class="hero" id="hero">
        <div class="badge-role">{{role or "Creator & Engineer"}}</div>
        <h1>{{name}}</h1>
        <p>{{summary}}</p>
    </header>

    <section class="section" id="skills">
        <h2 class="section-title">Capabilities</h2>
        <div class="card-grid" id="skills-container">
            <!-- Grouping skills into a nice card -->
            <div class="glass-card" style="grid-column: 1 / -1;">
                <h3>Core Stack</h3>
                <div class="tags-container">
                    {% for skill in skills %}
                    <span class="pill skill-tag">{{skill}}</span>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <section class="section" id="projects">
        <h2 class="section-title">Selected Works</h2>
        <div class="card-grid" id="projects-container">
            {% for project in projects %}
            <div class="glass-card">
                <h3>{{project.name}}</h3>
                <p style="color: #64748b; margin: 1rem 0;">{{project.description}}</p>
                <div class="tags-container">
                    <span class="pill">{{project.technologies}}</span>
                    {% if project.link %}
                    <a href="{{project.link}}" target="_blank" class="pill"
                        style="background: var(--primary); color: white; text-decoration: none; margin-left: 0.5rem; transition: 0.3s;"
                        onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">View &rarr;</a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <section class="section" id="experience">
        <h2 class="section-title">Journey</h2>
        <div id="experience-container">
            {% for exp in experience %}
            <div class="exp-item glass-card">
                <div class="exp-year">{{exp.year}}</div>
                <div class="exp-content">
                    <h3>{{exp.role}}</h3>
                    <h4>{{exp.company}}</h4>
                    <p>{{exp.details}}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    {% if certifications %}
    <section class="section" id="certifications">
        <h2 class="section-title">Certifications</h2>
        <div id="certifications-container">
            {% for cert in certifications %}
            <div class="exp-item glass-card" style="align-items: center;">
                <div class="exp-year" style="color: #ec4899;">{{cert.date}}</div>
                <div class="exp-content"
                    style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                    <div>
                        <h3>{{cert.name}}</h3>
                        <h4 style="margin-bottom: 0;">{{cert.issuer}}</h4>
                    </div>
                    {% if cert.link %}
                    <a href="{{cert.link}}" target="_blank"
                        style="padding: 0.5rem 1rem; border: 1px solid #ec4899; color: #ec4899; border-radius: 50px; text-decoration: none; font-size: 0.9rem; font-weight: bold;">Verify</a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <footer class="contact-footer">
        <h2 style="font-size: 4rem; margin-bottom: 1rem;">Let's Build Future.</h2>
        <p style="opacity: 0.6; margin-bottom: 2rem;">Open for collaborations and new opportunities.</p>
        <a href="mailto:{{email}}" class="cta-btn">Start a Conversation</a>
    </footer>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // Hero Anims
        gsap.to(".badge-role", { opacity: 1, y: 0, duration: 1, delay: 0.2 });
        gsap.to(".hero h1", { opacity: 1, y: 0, duration: 1, delay: 0.4, ease: "back.out(1.7)" });
        gsap.to(".hero p", { opacity: 1, y: 0, duration: 1, delay: 0.6 });

        // Cards Stagger
        gsap.utils.toArray('.glass-card').forEach(card => {
            gsap.to(card, {
                scrollTrigger: {
                    trigger: card,
                    start: "top 85%"
                },
                opacity: 1,
                y: 0,
                duration: 0.8,
                ease: "power2.out"
            });
        });

        // Exp Items Stagger
        gsap.utils.toArray('.exp-item').forEach(item => {
            gsap.to(item, {
                scrollTrigger: {
                    trigger: item,
                    start: "top 85%"
                },
                opacity: 1,
                x: 0,
                duration: 0.8
            });
        });

        // MAGIC EDIT
        document.addEventListener('DOMContentLoaded', () => {
            const createBtn = (text, id, bg, clickHandler) => {
                const btn = document.createElement('button');
                btn.innerText = text;
                btn.id = id;
                Object.assign(btn.style, {
                    position: 'fixed', bottom: '30px', right: '30px', zIndex: '10000',
                    padding: '12px 24px', background: bg, color: 'white',
                    border: 'none', borderRadius: '50px', cursor: 'pointer',
                    fontFamily: 'inherit', fontWeight: 'bold',
                    boxShadow: '0 10px 30px rgba(37, 99, 235, 0.3)', transition: 'all 0.3s'
                });
                btn.onclick = clickHandler;
                return btn;
            };

            const toggleBtn = createBtn('âœŽ Edit Site', 'edit-toggle-btn', '#2563eb', null);
            document.body.appendChild(toggleBtn);

            let isEditing = false;
            const textSelect = 'h1, h2, h3, h4, p, span, a, div.badge-role';

            const zones = [
                { id: 'skills', itemSel: '.skill-tag', containerSel: '#skills-container .tags-container', type: 'skill' },
                { id: 'projects', itemSel: '.glass-card', containerSel: '#projects-container', type: 'card' },
                { id: 'experience', itemSel: '.exp-item', containerSel: '#experience-container', type: 'card' },
                { id: 'certifications', itemSel: '.exp-item', containerSel: '#certifications-container', type: 'card' }
            ];

            const cleanupUI = () => {
                document.querySelectorAll('.edit-ui-element').forEach(el => el.remove());
                document.querySelectorAll(textSelect).forEach(el => {
                    el.contentEditable = 'false';
                    el.style.outline = 'none';
                    el.style.cursor = 'default';
                });
            };

            const enableEditing = () => {
                document.querySelectorAll(textSelect).forEach(el => {
                    el.contentEditable = 'true';
                    el.style.outline = '1px dashed #2563eb';
                    el.style.cursor = 'text';

                    if (el.tagName === 'A') {
                        el.onclick = (e) => {
                            if (isEditing) {
                                e.preventDefault();
                                e.stopImmediatePropagation();
                                const newUrl = prompt('Edit Link URL:', el.getAttribute('href'));
                                if (newUrl !== null) el.setAttribute('href', newUrl);
                            }
                        };
                    }
                });

                zones.forEach(zone => {
                    let container = document.querySelector(zone.containerSel);
                    if (!container) return; // Warning: Skills might be nested differently? Check Structure.
                    // Skills: #skills-container -> .glass-card -> div.tags-container. 
                    // My selector above was #skills-container .tags-container. Correct.

                    container.querySelectorAll(zone.itemSel).forEach(item => {
                        if (item.querySelector('.delete-btn')) return;
                        item.style.position = 'relative';
                        const delBtn = document.createElement('button');
                        delBtn.innerHTML = 'Ã—';
                        delBtn.className = 'edit-ui-element delete-btn';
                        Object.assign(delBtn.style, {
                            position: 'absolute', top: '-8px', right: '-8px',
                            width: '24px', height: '24px', borderRadius: '50%',
                            background: '#ef4444', color: 'white', border: 'none',
                            cursor: 'pointer', fontWeight: 'bold', zIndex: '10'
                        });
                        delBtn.onclick = (e) => {
                            e.stopPropagation();
                            if (confirm('Delete?')) item.remove();
                        };
                        item.appendChild(delBtn);
                    });

                    // Add Button Logic
                    // For skills, add button inside tags-container?
                    // For cards, add button after container?
                    if (zone.type === 'skill') {
                        if (!container.querySelector('.add-btn-skill')) {
                            const addBtn = document.createElement('button');
                            addBtn.innerHTML = '+';
                            addBtn.className = 'edit-ui-element add-btn-skill pill';
                            Object.assign(addBtn.style, { cursor: 'pointer', background: '#e2e8f0', color: '#2563eb' });
                            addBtn.onclick = () => {
                                const clone = document.createElement('span');
                                clone.className = 'pill skill-tag';
                                clone.innerText = 'New Skill';
                                container.insertBefore(clone, addBtn);
                                enableEditing();
                            };
                            container.appendChild(addBtn);
                        }
                    } else {
                        if (!container.parentElement.querySelector(`.add-btn-${zone.id}`)) {
                            const addBtn = document.createElement('button');
                            addBtn.innerText = '+ Add Entry';
                            addBtn.className = `edit-ui-element add-btn-${zone.id}`;
                            Object.assign(addBtn.style, {
                                display: 'block', margin: '2rem auto', padding: '10px 20px',
                                background: '#2563eb', color: 'white', borderRadius: '50px'
                            });
                            addBtn.onclick = () => {
                                const tempItem = container.querySelector(zone.itemSel);
                                if (tempItem) {
                                    const clone = tempItem.cloneNode(true);
                                    clone.querySelectorAll('.edit-ui-element').forEach(e => e.remove());
                                    // Reset styles manually since GSAP sets opacity 1
                                    clone.style.opacity = '1';
                                    clone.style.transform = 'none';
                                    container.appendChild(clone);
                                    enableEditing();
                                }
                            };
                            container.after(addBtn);
                        }
                    }
                });
            };

            const saveChanges = () => {
                toggleBtn.innerText = 'Saving...';
                cleanupUI();
                toggleBtn.remove();
                const fullHtml = document.documentElement.outerHTML;
                const filename = window.location.pathname.split('/').pop();
                document.body.appendChild(toggleBtn);
                toggleBtn.innerText = 'âœŽ Edit Site';
                fetch('/update-portfolio', {
                    method: 'POST', body: JSON.stringify({ filename, html: fullHtml }), headers: { 'Content-Type': 'application/json' }
                }).then(res => res.json()).then(d => alert(d.status === 'success' ? 'Saved!' : 'Error'));
            };

            toggleBtn.onclick = () => {
                isEditing = !isEditing;
                if (isEditing) {
                    toggleBtn.innerText = 'ðŸ’¾ Save';
                    toggleBtn.style.background = '#10b981';
                    enableEditing();
                } else {
                    saveChanges();
                }
            };
        });
    </script>
</body>

</html>